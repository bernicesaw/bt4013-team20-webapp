{% extends 'base.html' %}
{% block title %}Career Path Navigator for Developers{% endblock %}
{% block content %}
  <div class="container py-4">
    <div class="row mb-4">
      <div class="col-12">
        <h1 class="display-5">Career Path Navigator for Developers</h1>
        <p class="lead text-muted">Tools and visualisations focused on software and engineering careers: salary benchmarks, skill transition maps, personalised course recommendations, and an AI assistant tailored for developer questions.</p>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Dashboard</h5>
            <p class="card-text text-muted">High-level trends, salary and experience analytics across roles and time. Great for spotting market shifts and salary benchmarks.</p>
            <div class="mt-auto">
              <a class="btn btn-primary" href="/dashboard/">Open Dashboard</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Skill Adjacency Graph</h5>
            <p class="card-text text-muted">Interactive skill graph that shows how skills connect and which skills commonly appear together for different roles.</p>
            <div class="mt-auto">
              <a class="btn btn-primary" href="/skillgraph/">View Skill Graph</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Course Recommendation</h5>
            <p class="card-text text-muted">Get course suggestions tailored to a skill or job title using our course embeddings and recommender chain.</p>
            <div class="mt-auto">
              <a class="btn btn-primary" href="/askai/">Open Course Recommender (AskAI)</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="card mt-4 shadow-sm">
          <div class="card-body">
            <h5 class="card-title">AskAI â€” Career Assistant</h5>
            <p class="card-text text-muted">Chat with the AI to ask about career transitions, recommended skills, or to request a Cypher query against the career graph. The agent can also return course suggestions.</p>
            <a class="btn btn-outline-secondary" href="/askai/">Chat with AskAI</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Two-column visualisations -->
    <div class="row g-4 mt-4">
      <div class="col-lg-6" style="min-height:260px;">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">
            <h6 class="card-title">Developer Market Trends</h6>
            <p class="text-muted small">Example: median salaries over time for software roles (sample data).</p>
            <div class="flex-grow-1">
              <canvas id="chartLandscape" width="400" height="220" aria-label="Developer trends chart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-6" style="min-height:260px;">
        <div class="card shadow-sm h-100">
          <div class="card-body d-flex flex-column">
            <h6 class="card-title">Course Recommendations (sample)</h6>
            <p class="text-muted small">Example distribution of recommended course topics for a sample developer profile.</p>
            <div class="flex-grow-1">
              <canvas id="chartCourses" width="400" height="220" aria-label="Course recommendations chart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Skill adjacency mini-network -->
    <div class="row g-4 mt-4">
      <div class="col-12">
        <div class="card shadow-sm">
          <div class="card-body">
            <h6 class="card-title">Skill Adjacency (mini)</h6>
            <div id="skillNetwork" style="height:360px;"></div>
            <p class="small text-muted mt-2">Interactive mini-network showing simplified skill relationships for developer roles.</p>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>

  <!-- Chart.js and vis-network (CDN) + sample data scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js"></script>
  <script>
    // Landscape trends sample (line)
    try {
      const ctxL = document.getElementById('chartLandscape').getContext('2d');
      new Chart(ctxL, {
        type: 'line',
        data: {
          labels: ['2019','2020','2021','2022','2023','2024'],
          datasets: [{
            label: 'Median salary (USD)',
            data: [70000,72000,74000,76000,78000,80000],
            borderColor: '#2563eb',
            backgroundColor: 'rgba(37,99,235,0.08)',
            tension: 0.3
          }]
        },
        options: { responsive: true, maintainAspectRatio: false }
      });

      const ctxC = document.getElementById('chartCourses').getContext('2d');
      new Chart(ctxC, {
        type: 'bar',
        data: {
          labels: ['Frontend','Backend','Data','DevOps','Security'],
          datasets: [{
            label: 'Recommended courses',
            data: [12,18,22,9,6],
            backgroundColor: ['#0ea5a4','#60a5fa','#f97316','#34d399','#fb7185']
          }]
        },
        options: { responsive: true, maintainAspectRatio: false }
      });

      // vis-network mini graph
      const nodes = new vis.DataSet([
        { id: 1, label: 'HTML' },
        { id: 2, label: 'CSS' },
        { id: 3, label: 'JavaScript' },
        { id: 4, label: 'React' },
        { id: 5, label: 'Node.js' },
        { id: 6, label: 'Docker' },
        { id: 7, label: 'Kubernetes' }
      ]);
      const edges = new vis.DataSet([
        { from: 1, to: 3 }, { from: 2, to: 3 }, { from: 3, to: 4 }, { from: 4, to: 5 }, { from: 5, to: 6 }, { from: 6, to: 7 }
      ]);
      const container = document.getElementById('skillNetwork');
      const data = { nodes: nodes, edges: edges };
      const options = { physics: { stabilization: true }, interaction: { hover: true }, nodes: { shape: 'dot', size: 16 } };
      new vis.Network(container, data, options);
    } catch (e) {
      console.warn('Homepage visuals failed to render', e);
    }
  </script>

{% endblock %}
